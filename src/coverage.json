{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-08T23:22:18.921Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 5,
    "implemented": 3,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Restore the backend Motoko API for hotel invite tokens so the frontend Admin Panel can successfully generate and list invite tokens without runtime errors. Implement (or re-introduce) the exact methods expected by the frontend extended backend interface: createInviteToken(maxUses, boundPrincipal), getInviteTokens(), validateInviteToken(token), and consumeInviteToken(token), with admin-only authorization for token creation/listing and appropriate authorization for validation/consumption.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-2",
        "summary": "Ensure backend authorization aligns with the app’s role-gated UI: admin can access /admin and generate invite tokens; hotel users can access /hotel only when activated; guests cannot access /admin or /hotel. Fix any backend role/admin detection endpoints that the frontend relies on (e.g., isCallerAdmin and getCallerUserRole) so role-based navigation and guards are consistent and do not regress.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-3",
        "summary": "Restore the TopNav links and labeling to match the screenshots: show a clear 'Home' link, 'Browse Hotels', 'My Bookings', 'Account' (or equivalent account page label matching the screenshot), and 'Hotel Area' (when permitted). Keep 'Admin Panel' visible only for admin. Ensure 'My Bookings' navigates to a page that shows the user’s bookings list (reuse the existing GuestAccountPage bookings table).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/nav/TopNav.tsx",
          "frontend/src/App.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/nav/TopNav.tsx",
          "frontend/src/App.tsx"
        ]
      },
      {
        "id": "REQ-4",
        "summary": "Add/adjust routing so there is an explicit route for 'My Bookings' (e.g., '/bookings') that renders the same bookings table currently shown in GuestAccountPage, and ensure it is protected by authentication and profile completion gates (same protection level as the current '/account' route).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/MyBookingsPage.tsx",
          "frontend/src/components/booking/MyBookingsTable.tsx",
          "frontend/src/pages/GuestAccountPage.tsx",
          "frontend/src/App.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/MyBookingsPage.tsx",
          "frontend/src/components/booking/MyBookingsTable.tsx",
          "frontend/src/pages/GuestAccountPage.tsx",
          "frontend/src/App.tsx"
        ]
      },
      {
        "id": "REQ-5",
        "summary": "Run and satisfy the existing regression checklist items relevant to this fix (Admin Invite Tokens generation, role-based navigation, Guest Account bookings visibility, and Hotel Area access). Fix any discovered regressions that prevent the app from matching the provided screenshots for the affected flows.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/REGRESSION_CHECKLIST.md",
          "frontend/src/components/auth/RequireRole.tsx",
          "frontend/src/hooks/useQueries.ts"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/App.tsx",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/booking/MyBookingsTable.tsx",
    "frontend/src/components/nav/TopNav.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/GuestAccountPage.tsx",
    "frontend/src/pages/MyBookingsPage.tsx",
    "frontend/src/types/extended-backend.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}