{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-08T19:19:01.805Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 4,
    "implemented": 2,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Fix backend room create/update and room listing behavior so that rooms uploaded by a hotel account are persisted under the correct hotel principal and are retrievable by (a) the same hotel account in the hotel dashboard and (b) guests browsing the hotel detail page (not only admins). Ensure the room read path uses a single source of truth (roomsMap/hotelsMap) and that role-based filtering does not accidentally exclude the hotel owner or guests for the uploaded hotel.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-2",
        "summary": "Fix backend hotel/room visibility rules so guest-facing hotel discovery and room browsing do not hide hotels/rooms in a way that breaks booking discovery. Align the rules with the required behavior: once a hotel uploads rooms, guests must be able to see that hotelâ€™s rooms for booking in guest views.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-3",
        "summary": "Ensure frontend hotel dashboard and guest hotel detail views reliably refresh room data after create/update and do not accidentally query rooms with an invalid/anonymous hotelId. Keep all user-facing copy in English.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/hotel/RoomsPanel.tsx",
          "frontend/src/hooks/useQueries.ts",
          "frontend/src/pages/HotelDetailPage.tsx",
          "frontend/src/hooks/useRoomImageUpload.ts"
        ],
        "matchedFiles": [
          "frontend/src/components/hotel/RoomsPanel.tsx",
          "frontend/src/hooks/useQueries.ts",
          "frontend/src/pages/HotelDetailPage.tsx",
          "frontend/src/hooks/useRoomImageUpload.ts"
        ]
      },
      {
        "id": "REQ-4",
        "summary": "Add a focused regression verification pass for the room upload/visibility flow covering hotel owner upload, guest browsing, and post-reload persistence, and document any steps needed to reproduce/verify the fix in the existing regression checklist.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/REGRESSION_CHECKLIST.md",
          "frontend/src/components/hotel/RoomsPanel.tsx",
          "frontend/src/pages/HotelDetailPage.tsx"
        ],
        "matchedFiles": [
          "frontend/REGRESSION_CHECKLIST.md",
          "frontend/src/components/hotel/RoomsPanel.tsx",
          "frontend/src/pages/HotelDetailPage.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/REGRESSION_CHECKLIST.md",
    "frontend/src/components/hotel/RoomsPanel.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/hooks/useRoomImageUpload.ts",
    "frontend/src/pages/HotelDetailPage.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}