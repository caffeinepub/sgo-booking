{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Restore system to previous stable version to revert regressions (hotel activation/admin tokens/roles) and then only work on the requested 'upload kamar' (room upload) feature.",
  "architectural_notes": [
    "Project policy: avoid modifying unrelated features; changes should be limited to the requested scope (room upload) after restoring stable baseline."
  ],
  "known_issues": [
    "Regression after latest deployment caused hotel accounts to appear inactive and admin-created hotel tokens to disappear from the UI; user requests rollback to stable."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-restore-the-previously-stable-behavior-for-hotel-activation-admin-invite-token-visibility-and-role-based-access-by-ensuring-the-backend-canister-exports-all-methods-currently-called-by-the-frontend-auth-admin-hotel-profile-flows-and-that-these-methods-return-consistent-results-so-hotel-accounts-do-not-appear-incorrectly-inactive-and-existing-admin-created-tokens-are-visible-again",
      "title": "Restore the previously stable behavior for hotel activation, admin invite-token visibility, and role-based access by ensuring the backend canister exports all methods currently called by the frontend auth/admin/hotel-profile flows, and that these methods return consistent results so hotel accounts do not appear incorrectly inactive and existing admin-created tokens are visible again.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-limit-changes-strictly-to-a-restoring-the-broken-stable-features-and-b-the-requested-upload-kamar-room-upload-flow-do-not-refactor-or-change-unrelated-functionality-booking-payments-browsing-etc-beyond-what-is-necessary-to-remove-the-regression",
      "title": "Limit changes strictly to (a) restoring the broken stable features and (b) the requested 'upload kamar' (room upload) flow; do not refactor or change unrelated functionality (booking, payments, browsing, etc.) beyond what is necessary to remove the regression.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-and-harden-the-upload-kamar-flow-in-the-rooms-panel-so-adding-editing-a-room-with-photos-is-reliable-validate-selected-image-files-provide-clear-errors-preserve-existing-photos-when-editing-unless-explicitly-replaced-deleted-and-ensure-the-saved-room-s-picture-urls-remain-usable-after-page-reload",
      "title": "Fix and harden the 'upload kamar' flow in the Rooms panel so adding/editing a room with photos is reliable: validate selected image files, provide clear errors, preserve existing photos when editing unless explicitly replaced/deleted, and ensure the saved room's picture URLs remain usable after page reload.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-room-photo-upload-implementation-so-it-does-not-rely-on-large-base64-data-urls-for-long-term-storage-store-uploaded-images-in-the-canister-s-blob-storage-mechanism-and-save-stable-retrievable-urls-identifiers-in-roominput-pictures-instead",
      "title": "Update the room photo upload implementation so it does not rely on large base64 data URLs for long-term storage; store uploaded images in the canisterâ€™s blob storage mechanism and save stable retrievable URLs/identifiers in `RoomInput.pictures` instead.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-focused-regression-verification-pass-using-the-existing-regression-checklist-to-confirm-the-restored-stable-behaviors-auth-roles-hotel-activation-admin-tokens-and-the-updated-room-upload-behavior-before-deployment-record-the-verification-steps-in-the-release-notes",
      "title": "Add a focused regression verification pass using the existing regression checklist to confirm the restored stable behaviors (auth/roles, hotel activation, admin tokens) and the updated room upload behavior before deployment; record the verification steps in the release notes.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Rollback/restore the app to the previous stable version so existing features behave normally again (hotel activation, admin token visibility, role/routing).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-2",
      "summary": "Fix/improve only the 'upload kamar' (room upload) feature as requested, without touching unrelated features.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Restore stable hotel activation/admin token behavior and fix room photo upload only",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}